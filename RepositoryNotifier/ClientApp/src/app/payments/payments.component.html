<app-nav-menu [isAuthenticated]="isAuthenticated" [username]="username"></app-nav-menu>
<div class="container paymentsMain">
    <div class="region">
        <div class="card border-0">
            <div class="card-body">
                <h1 class="card-title" style="padding-top:10px; padding-bottom:10px;">My Premium Plan:</h1>
                <div class="row" *ngIf="abonement != null">
                    <!-- https://www.bootdey.com/snippets/view/Gradients-dashboard-cards#css -->
                    <div class="col-md-4 col-xl-4">
                        <div class="card bg-primary order-card">
                            <div class="card-block">
                                <h6 class="m-b-20">PremiumPlan</h6>
                                <h2 class="text-right"><i class="fa fa-star f-left"></i><span>{{abonement.premiumPlan.name}}</span></h2>
                                <p class="m-b-0">Payment Method<span class="f-right">{{abonement.premiumPlan.payments[0].paymentType}}</span></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 col-xl-4">
                        <div class="card bg-info order-card">
                                <div class="card-block">
                                    <h6 class="m-b-20">Last Payed</h6>
                                    <h2 class="text-right"><i class="fa fa-calendar f-left"></i><span>{{abonement.premiumPlan.buyingDate | date:'dd.MM.yyyy'}}</span></h2>
                                    <p class="m-b-0">Buying Date<span class="f-right">{{abonement.premiumPlan.buyingDate | date:'dd.MM.yyyy'}}</span></p>
                                </div>
                            </div>
                    </div>
                    <div class="col-md-4 col-xl-4">
                        <div *ngIf="abonement.active" class="card bg-success order-card">
                                <div class="card-block">
                                    <h6 class="m-b-20">Status</h6>
                                    <h2 class="text-right"><i class="fa fa-check f-left"></i><span>Active</span></h2>
                                    <p class="m-b-0">Expires<span class="f-right">12m</span></p>
                                </div>
                            </div>

                            <div *ngIf="!abonement.active" class="card bg-danger order-card">
                                    <div class="card-block">
                                        <h6 class="m-b-20">Status</h6>
                                        <h2 class="text-right"><i class="fa fa-times f-left"></i><span>Inactive</span></h2>
                                        <p class="m-b-0">Expires<span class="f-right">Expired</span></p>
                                    </div>
                                </div>
                    </div>
                </div>

                <div *ngIf="abonement == null">
                    <p class="text-info">You haven't bought any premium plans yet.</p>
                </div>
            </div>
        </div>
    </div>
    <div *ngIf="abonement != null" class="region">
        <div class="card border-0">
            <div class="card-body">
            <h2 class="card-title" style="padding-top:10px; padding-bottom:10px;">My Payments:</h2>
            <div class="row">
                <div class="col-12">
                    <table *ngIf="abonement != null" class="table table-hover">
                            <caption class="text-success"> List of payments</caption>
                        <thead class="thead table-success">
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">Amount</th>
                                <th scope="col">Payment Type</th>
                                <th scope="col">Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let payment of abonement.premiumPlan.payments; let i = index"
                                [attr.data-index]="i">
                                <th scope="row">{{i+1}}</th>
                                <td>{{payment.amount}} €</td>
                                <td>{{payment.paymentType}}</td>
                                <td>{{payment.paymentDate | date:'dd.MM.yyyy HH:mm'}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        </div>
    </div>
    <div class="region">
        <div class="card border-0">
            <div class="card-body">
                <h2 class="card-title" style="padding-top:10px; padding-bottom:10px;">My Donations:</h2>
                <div class="row">
                    <div class="col-12">
                        <table *ngIf="donations.length > 0" class="table table-hover">
                            <caption class="text-primary"> List of donations</caption>
                            <thead class="thead table-primary">
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Amount</th>
                                    <th scope="col">Payment Type</th>
                                    <th scope="col">Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let donation of donations; let i = index" [attr.data-index]="i">
                                    <th scope="row">{{i+1}}</th>
                                    <td>{{donation.amount}} €</td>
                                    <td>{{donation.paymentType}}</td>
                                    <td>{{donation.createdAt | date:'dd.MM.yyyy HH:mm'}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div *ngIf="donations.length < 1">
                    <p class="text-primary">You haven't created any donations yet.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<app-footer></app-footer>